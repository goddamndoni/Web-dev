import { CommonModule } from '@angular/common';
import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, ViewChild, ViewChildren, } from '@angular/core';
import { SUPPORT, isBrowser, } from '../../core';
import { ChevronIconComponent } from '../icons/chevron/chevron-icon.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class ThumbsComponent {
    get cssClass() {
        return `thumbs--${this.orientation}`;
    }
    get hostOffsetAxis() {
        return this.vertical
            ? this.elRef.nativeElement.offsetHeight
            : this.elRef.nativeElement.offsetWidth;
    }
    get scrollKey() {
        return this.vertical ? 'scrollTop' : 'scrollLeft';
    }
    get thumbsEmpty() {
        return !this.thumbsRef || !this.thumbsRef.length;
    }
    get vertical() {
        return this.orientation === 'left' || this.orientation === 'right';
    }
    constructor(cd, elRef) {
        this.cd = cd;
        this.elRef = elRef;
        this.items = [];
        this.thumbClick = new EventEmitter();
        this.thumbHover = new EventEmitter();
        this.showStartArrow = false;
        this.showEndArrow = false;
        this.onArrowsObserved = entries => {
            if (this.thumbsEmpty)
                return;
            const firstTarget = entries[0].target;
            const { first, last } = this.thumbsRef;
            const firstThumbEntry = firstTarget === first.nativeElement ? entries[0] : entries[1];
            const lastThumbEntry = firstTarget === last.nativeElement ? entries[0] : entries[1];
            this.setObservedArrows(firstThumbEntry, lastThumbEntry);
            this.cd.detectChanges();
        };
    }
    ngOnChanges({ arrows, items }) {
        if (arrows) {
            if (arrows.currentValue) {
                this.observeArrows();
            }
            else if (!arrows.currentValue) {
                this.showStartArrow = this.showEndArrow = false;
                this.unobserveArrows();
            }
        }
        if (items) {
            setTimeout(() => {
                if (this.arrows) {
                    this.observeArrows();
                }
                this.centerThumbIfNeeded(this.selectedIndex);
            });
        }
    }
    ngOnDestroy() {
        this.unobserveArrows();
    }
    slide(direction) {
        let delta;
        if (this.arrowSlideByLength) {
            delta = this.arrowSlideByLength;
        }
        else {
            // Note: Slide by the full height/width of the gallery
            // or by the overflow of the thumbs - to prevent unnecessary requestAnimationFrame calls while trying to scroll
            // outside of the min/max scroll of the thumbs
            const thumbList = this.thumbListRef.nativeElement;
            const thumbListScrollAxis = this.vertical
                ? thumbList.scrollHeight
                : thumbList.scrollWidth;
            const thumbListOffsetAxis = this.vertical
                ? thumbList.offsetHeight
                : thumbList.offsetWidth;
            delta = Math.min(thumbListOffsetAxis, thumbListScrollAxis - thumbListOffsetAxis);
        }
        this.scroll(delta * direction);
    }
    centerThumbIfNeeded(index) {
        if (!this.items || this.items.length <= 1) {
            return;
        }
        const nextItemRef = this.thumbsRef.toArray()[index];
        if (!nextItemRef) {
            return;
        }
        const nextItemEl = nextItemRef.nativeElement;
        const { offsetLeft, offsetTop, offsetWidth, offsetHeight } = nextItemEl;
        const itemOffset = this.vertical ? offsetTop : offsetLeft;
        const itemOffsetAxis = this.vertical ? offsetHeight : offsetWidth;
        const hostScrollAxis = this.hostOffsetAxis;
        const thumbListScroll = this.thumbListRef.nativeElement[this.scrollKey];
        const nextScrollDelta = itemOffset + itemOffsetAxis / 2 - hostScrollAxis / 2 - thumbListScroll;
        if (thumbListScroll + hostScrollAxis < itemOffset + itemOffsetAxis ||
            thumbListScroll > itemOffset) {
            this.scroll(nextScrollDelta);
        }
    }
    select(index) {
        this.selectedIndex = index;
        this.cd.detectChanges();
        if (this.autoScroll) {
            setTimeout(() => this.centerThumbIfNeeded(index));
        }
    }
    emitEvent(index, item, event, emitter) {
        emitter.emit({
            index,
            item,
            event,
        });
    }
    onLoadChange(item, success) {
        item._thumbFailed = !success;
    }
    scroll(totalScrollDelta) {
        if (!isBrowser) {
            return;
        }
        if (SUPPORT.scrollBehavior || this.scrollBehavior === 'auto') {
            this.shiftByDelta(totalScrollDelta);
            return;
        }
        if (this.scrollId != null) {
            cancelAnimationFrame(this.scrollId);
        }
        const totalDistance = Math.abs(totalScrollDelta);
        const startTime = Date.now();
        const baseArrowSlideTime = 200;
        let totalTime = (Math.log10(totalDistance) - 1.1) * baseArrowSlideTime;
        if (totalTime < 0) {
            totalTime = baseArrowSlideTime;
        }
        let currentScroll = 0;
        // Emulating native scroll-behavior: smooth
        // NOTE: This function is called on per frame basis recursively to create smooth animation.
        // The scroll value is updated proportionally to the time elapsed since the animation's start.
        // The period of requested frames should match the display's refresh rate as recommended in W3C spec.
        const animate = () => {
            const suggestedScroll = Math.ceil(((Date.now() - startTime) / totalTime) * totalDistance);
            let frameScroll = Math.min(suggestedScroll - currentScroll, totalDistance - currentScroll);
            frameScroll *= Math.sign(totalScrollDelta);
            currentScroll = suggestedScroll;
            this.shiftByDelta(frameScroll);
            if (currentScroll <= totalDistance) {
                this.scrollId = requestAnimationFrame(animate);
            }
        };
        this.scrollId = requestAnimationFrame(animate);
    }
    shiftByDelta(delta) {
        this.thumbListRef.nativeElement[this.scrollKey] += delta;
    }
    observeArrows() {
        if (this.thumbsEmpty)
            return;
        if (!this.arrowObserver) {
            this.arrowObserver = new IntersectionObserver(this.onArrowsObserved, {
                root: this.thumbListRef.nativeElement,
                threshold: 1.0,
            });
        }
        else {
            this.unobserveArrows();
        }
        this.arrowObserver.observe(this.thumbsRef.first.nativeElement);
        this.arrowObserver.observe(this.thumbsRef.last.nativeElement);
    }
    setObservedArrows(firstThumb, lastThumb) {
        const inverse = this.isRtl && !this.vertical;
        if (inverse) {
            if (lastThumb)
                this.showStartArrow = lastThumb.intersectionRatio < 1;
            if (firstThumb)
                this.showEndArrow = firstThumb.intersectionRatio < 1;
        }
        else {
            if (firstThumb)
                this.showStartArrow = firstThumb.intersectionRatio < 1;
            if (lastThumb)
                this.showEndArrow = lastThumb.intersectionRatio < 1;
        }
    }
    unobserveArrows() {
        this.arrowObserver && this.arrowObserver.disconnect();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.8", ngImport: i0, type: ThumbsComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.8", type: ThumbsComponent, isStandalone: true, selector: "thumbs", inputs: { items: "items", selectedIndex: "selectedIndex", aria: "aria", orientation: "orientation", arrows: "arrows", arrowSlideByLength: "arrowSlideByLength", autoScroll: "autoScroll", thumbTemplate: "thumbTemplate", arrowTemplate: "arrowTemplate", errorTemplate: "errorTemplate", scrollBehavior: "scrollBehavior", isRtl: "isRtl" }, outputs: { thumbClick: "thumbClick", thumbHover: "thumbHover" }, host: { properties: { "class": "this.cssClass" } }, viewQueries: [{ propertyName: "thumbListRef", first: true, predicate: ["thumbs"], descendants: true, static: true }, { propertyName: "thumbsRef", predicate: ["thumb"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<button\n  *ngIf=\"showStartArrow\"\n  aria-label=\"Previous thumbnails\"\n  class=\"thumbs-arrow thumbs-arrow-prev\"\n  (click)=\"slide(-1)\"\n>\n  <div *ngIf=\"!arrowTemplate; else $any(arrowTemplate)\">\n    <chevron-icon></chevron-icon>\n  </div>\n</button>\n\n<ul #thumbs [style.scrollBehavior]=\"scrollBehavior\" [class.rtl]=\"isRtl\">\n  <li *ngIf=\"!items || !items.length\" class=\"thumbs-initial-item\"></li>\n  <li\n    #thumb\n    *ngFor=\"let item of items; let i = index\"\n    [class.thumbs-item--selected]=\"i === selectedIndex\"\n    aria-hidden=\"true\"\n    (click)=\"emitEvent(i, item, $event, thumbClick)\"\n    (mouseenter)=\"emitEvent(i, item, $event, thumbHover)\"\n  >\n    <ng-container *ngIf=\"!thumbTemplate; else customThumbTemplate\">\n      <img\n        [src]=\"item.thumbSrc || ''\"\n        [alt]=\"item.alt\"\n        (load)=\"onLoadChange(item, true)\"\n        (error)=\"onLoadChange(item, false)\"\n      />\n\n      <ng-container *ngIf=\"item._thumbFailed\">\n        <div\n          *ngIf=\"!errorTemplate; else $any(errorTemplate)\"\n          class=\"thumbs-error\"\n        >\n          <div\n            class=\"thumbs-error-icon\"\n            [class.thumbs-error-icon--video]=\"item.video\"\n          ></div>\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #customThumbTemplate>\n      <ng-container\n        *ngTemplateOutlet=\"\n          $any(thumbTemplate);\n          context: { index: i, selectedIndex: selectedIndex, item: item }\n        \"\n      ></ng-container>\n    </ng-template>\n  </li>\n</ul>\n\n<button\n  *ngIf=\"showEndArrow\"\n  aria-label=\"Next thumbnails\"\n  class=\"thumbs-arrow thumbs-arrow-next\"\n  (click)=\"slide(1)\"\n>\n  <div *ngIf=\"!arrowTemplate; else $any(arrowTemplate)\">\n    <chevron-icon></chevron-icon>\n  </div>\n</button>\n", styles: [":host{flex:1 0 auto;position:relative;background-color:#f3f3f3}:host.thumbs--top,:host.thumbs--bottom{width:100%}:host.thumbs--top ul,:host.thumbs--bottom ul{width:100%;display:flex;overflow-x:scroll;overflow-y:hidden}:host.thumbs--top ul.rtl li:first-child,:host.thumbs--bottom ul.rtl li:first-child{margin-left:0;margin-right:auto}:host.thumbs--top ul.rtl li:last-child,:host.thumbs--bottom ul.rtl li:last-child{margin-right:0;margin-left:auto}:host.thumbs--top li,:host.thumbs--bottom li{flex:none}:host.thumbs--top li:not(:first-child),:host.thumbs--bottom li:not(:first-child){border-left:0}:host.thumbs--top li:first-child,:host.thumbs--bottom li:first-child{margin-left:auto}:host.thumbs--top li:last-child,:host.thumbs--bottom li:last-child{margin-right:auto}:host.thumbs--top .thumbs-arrow,:host.thumbs--bottom .thumbs-arrow{top:0;height:100%}:host.thumbs--top .thumbs-arrow>div,:host.thumbs--bottom .thumbs-arrow>div{width:30px;height:100%}:host.thumbs--top .thumbs-arrow-prev,:host.thumbs--bottom .thumbs-arrow-prev{left:0}:host.thumbs--top .thumbs-arrow-next,:host.thumbs--bottom .thumbs-arrow-next{right:0}:host.thumbs--top .thumbs-error,:host.thumbs--bottom .thumbs-error{border-right:1px solid #cecece}:host.thumbs--left,:host.thumbs--right{height:100%}:host.thumbs--left ul,:host.thumbs--right ul{height:100%;overflow-y:scroll;overflow-x:hidden}:host.thumbs--left li,:host.thumbs--right li{border-top:0}:host.thumbs--left .thumbs-arrow,:host.thumbs--right .thumbs-arrow{width:100%}:host.thumbs--left .thumbs-arrow>div,:host.thumbs--right .thumbs-arrow>div{width:100%;height:30px}:host.thumbs--left .thumbs-arrow chevron-icon,:host.thumbs--right .thumbs-arrow chevron-icon{transform:rotate(90deg)}:host.thumbs--left .thumbs-arrow-prev,:host.thumbs--right .thumbs-arrow-prev{top:0}:host.thumbs--left .thumbs-arrow-next,:host.thumbs--right .thumbs-arrow-next{bottom:0}:host.thumbs--left .thumbs-error,:host.thumbs--right .thumbs-error{border-bottom:1px solid #cecece}:host.thumbs--bottom,:host.thumbs--right{order:1}ul{outline:0;scrollbar-width:none;-webkit-overflow-scrolling:touch;transform:translateZ(0)}ul::-webkit-scrollbar{width:0;height:0}li{box-sizing:border-box;width:120px;height:80px;position:relative;cursor:pointer}li.thumbs-initial-item{visibility:hidden}li.thumbs-item--selected:after{content:\"\";display:block;position:absolute;left:0;bottom:0;width:100%;height:100%;border:10px solid rgba(255,255,255,.8117647059);box-sizing:border-box}img{width:100%;height:100%;background-repeat:no-repeat;background-position:center;object-fit:cover;color:transparent}.thumbs-error{position:absolute;left:0;top:0;width:100%;height:100%;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;background:#e8e8e8;box-sizing:border-box}.thumbs-error-icon:not(.thumbs-error-icon--video){position:relative;border-left:16px solid transparent;border-right:16px solid transparent;border-bottom:28px solid #a5a5a5;margin-left:-8px}.thumbs-error-icon:not(.thumbs-error-icon--video):before,.thumbs-error-icon:not(.thumbs-error-icon--video):after{content:\"\";position:absolute}.thumbs-error-icon:not(.thumbs-error-icon--video):before{height:10px;width:10px;background-color:#a5a5a5;border-radius:100%;left:14px}.thumbs-error-icon:not(.thumbs-error-icon--video):after{border-left:14px solid transparent;border-right:14px solid transparent;border-bottom:17px solid #a5a5a5;top:11px}.thumbs-error-icon--video{border-top:16px solid transparent;border-bottom:16px solid transparent;border-left:28px solid #a5a5a5;margin-left:9px}.thumbs-arrow{position:absolute;padding:0;background-color:transparent;cursor:pointer;z-index:10}.thumbs-arrow-prev{transform:scale(-1)}.thumbs-arrow>div{display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5);padding:0;opacity:.7}@media (hover: hover) and (pointer: fine){.thumbs-arrow>div:hover{opacity:1}}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: ChevronIconComponent, selector: "chevron-icon" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.8", ngImport: i0, type: ThumbsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'thumbs', changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [CommonModule, ChevronIconComponent], template: "<button\n  *ngIf=\"showStartArrow\"\n  aria-label=\"Previous thumbnails\"\n  class=\"thumbs-arrow thumbs-arrow-prev\"\n  (click)=\"slide(-1)\"\n>\n  <div *ngIf=\"!arrowTemplate; else $any(arrowTemplate)\">\n    <chevron-icon></chevron-icon>\n  </div>\n</button>\n\n<ul #thumbs [style.scrollBehavior]=\"scrollBehavior\" [class.rtl]=\"isRtl\">\n  <li *ngIf=\"!items || !items.length\" class=\"thumbs-initial-item\"></li>\n  <li\n    #thumb\n    *ngFor=\"let item of items; let i = index\"\n    [class.thumbs-item--selected]=\"i === selectedIndex\"\n    aria-hidden=\"true\"\n    (click)=\"emitEvent(i, item, $event, thumbClick)\"\n    (mouseenter)=\"emitEvent(i, item, $event, thumbHover)\"\n  >\n    <ng-container *ngIf=\"!thumbTemplate; else customThumbTemplate\">\n      <img\n        [src]=\"item.thumbSrc || ''\"\n        [alt]=\"item.alt\"\n        (load)=\"onLoadChange(item, true)\"\n        (error)=\"onLoadChange(item, false)\"\n      />\n\n      <ng-container *ngIf=\"item._thumbFailed\">\n        <div\n          *ngIf=\"!errorTemplate; else $any(errorTemplate)\"\n          class=\"thumbs-error\"\n        >\n          <div\n            class=\"thumbs-error-icon\"\n            [class.thumbs-error-icon--video]=\"item.video\"\n          ></div>\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #customThumbTemplate>\n      <ng-container\n        *ngTemplateOutlet=\"\n          $any(thumbTemplate);\n          context: { index: i, selectedIndex: selectedIndex, item: item }\n        \"\n      ></ng-container>\n    </ng-template>\n  </li>\n</ul>\n\n<button\n  *ngIf=\"showEndArrow\"\n  aria-label=\"Next thumbnails\"\n  class=\"thumbs-arrow thumbs-arrow-next\"\n  (click)=\"slide(1)\"\n>\n  <div *ngIf=\"!arrowTemplate; else $any(arrowTemplate)\">\n    <chevron-icon></chevron-icon>\n  </div>\n</button>\n", styles: [":host{flex:1 0 auto;position:relative;background-color:#f3f3f3}:host.thumbs--top,:host.thumbs--bottom{width:100%}:host.thumbs--top ul,:host.thumbs--bottom ul{width:100%;display:flex;overflow-x:scroll;overflow-y:hidden}:host.thumbs--top ul.rtl li:first-child,:host.thumbs--bottom ul.rtl li:first-child{margin-left:0;margin-right:auto}:host.thumbs--top ul.rtl li:last-child,:host.thumbs--bottom ul.rtl li:last-child{margin-right:0;margin-left:auto}:host.thumbs--top li,:host.thumbs--bottom li{flex:none}:host.thumbs--top li:not(:first-child),:host.thumbs--bottom li:not(:first-child){border-left:0}:host.thumbs--top li:first-child,:host.thumbs--bottom li:first-child{margin-left:auto}:host.thumbs--top li:last-child,:host.thumbs--bottom li:last-child{margin-right:auto}:host.thumbs--top .thumbs-arrow,:host.thumbs--bottom .thumbs-arrow{top:0;height:100%}:host.thumbs--top .thumbs-arrow>div,:host.thumbs--bottom .thumbs-arrow>div{width:30px;height:100%}:host.thumbs--top .thumbs-arrow-prev,:host.thumbs--bottom .thumbs-arrow-prev{left:0}:host.thumbs--top .thumbs-arrow-next,:host.thumbs--bottom .thumbs-arrow-next{right:0}:host.thumbs--top .thumbs-error,:host.thumbs--bottom .thumbs-error{border-right:1px solid #cecece}:host.thumbs--left,:host.thumbs--right{height:100%}:host.thumbs--left ul,:host.thumbs--right ul{height:100%;overflow-y:scroll;overflow-x:hidden}:host.thumbs--left li,:host.thumbs--right li{border-top:0}:host.thumbs--left .thumbs-arrow,:host.thumbs--right .thumbs-arrow{width:100%}:host.thumbs--left .thumbs-arrow>div,:host.thumbs--right .thumbs-arrow>div{width:100%;height:30px}:host.thumbs--left .thumbs-arrow chevron-icon,:host.thumbs--right .thumbs-arrow chevron-icon{transform:rotate(90deg)}:host.thumbs--left .thumbs-arrow-prev,:host.thumbs--right .thumbs-arrow-prev{top:0}:host.thumbs--left .thumbs-arrow-next,:host.thumbs--right .thumbs-arrow-next{bottom:0}:host.thumbs--left .thumbs-error,:host.thumbs--right .thumbs-error{border-bottom:1px solid #cecece}:host.thumbs--bottom,:host.thumbs--right{order:1}ul{outline:0;scrollbar-width:none;-webkit-overflow-scrolling:touch;transform:translateZ(0)}ul::-webkit-scrollbar{width:0;height:0}li{box-sizing:border-box;width:120px;height:80px;position:relative;cursor:pointer}li.thumbs-initial-item{visibility:hidden}li.thumbs-item--selected:after{content:\"\";display:block;position:absolute;left:0;bottom:0;width:100%;height:100%;border:10px solid rgba(255,255,255,.8117647059);box-sizing:border-box}img{width:100%;height:100%;background-repeat:no-repeat;background-position:center;object-fit:cover;color:transparent}.thumbs-error{position:absolute;left:0;top:0;width:100%;height:100%;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;background:#e8e8e8;box-sizing:border-box}.thumbs-error-icon:not(.thumbs-error-icon--video){position:relative;border-left:16px solid transparent;border-right:16px solid transparent;border-bottom:28px solid #a5a5a5;margin-left:-8px}.thumbs-error-icon:not(.thumbs-error-icon--video):before,.thumbs-error-icon:not(.thumbs-error-icon--video):after{content:\"\";position:absolute}.thumbs-error-icon:not(.thumbs-error-icon--video):before{height:10px;width:10px;background-color:#a5a5a5;border-radius:100%;left:14px}.thumbs-error-icon:not(.thumbs-error-icon--video):after{border-left:14px solid transparent;border-right:14px solid transparent;border-bottom:17px solid #a5a5a5;top:11px}.thumbs-error-icon--video{border-top:16px solid transparent;border-bottom:16px solid transparent;border-left:28px solid #a5a5a5;margin-left:9px}.thumbs-arrow{position:absolute;padding:0;background-color:transparent;cursor:pointer;z-index:10}.thumbs-arrow-prev{transform:scale(-1)}.thumbs-arrow>div{display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5);padding:0;opacity:.7}@media (hover: hover) and (pointer: fine){.thumbs-arrow>div:hover{opacity:1}}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }]; }, propDecorators: { items: [{
                type: Input
            }], selectedIndex: [{
                type: Input
            }], aria: [{
                type: Input
            }], orientation: [{
                type: Input
            }], arrows: [{
                type: Input
            }], arrowSlideByLength: [{
                type: Input
            }], autoScroll: [{
                type: Input
            }], thumbTemplate: [{
                type: Input
            }], arrowTemplate: [{
                type: Input
            }], errorTemplate: [{
                type: Input
            }], scrollBehavior: [{
                type: Input
            }], isRtl: [{
                type: Input
            }], thumbClick: [{
                type: Output
            }], thumbHover: [{
                type: Output
            }], thumbListRef: [{
                type: ViewChild,
                args: ['thumbs', { static: true }]
            }], thumbsRef: [{
                type: ViewChildren,
                args: ['thumb']
            }], cssClass: [{
                type: HostBinding,
                args: ['class']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGh1bWJzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvZ2FsbGVyeS9zcmMvbGliL2NvbXBvbmVudHMvdGh1bWJzL3RodW1icy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2dhbGxlcnkvc3JjL2xpYi9jb21wb25lbnRzL3RodW1icy90aHVtYnMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFDTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sRUFJTixTQUFTLEVBQ1QsWUFBWSxHQUNiLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFFTCxPQUFPLEVBRVAsU0FBUyxHQUNWLE1BQU0sWUFBWSxDQUFDO0FBR3BCLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHlDQUF5QyxDQUFDOzs7QUFVL0UsTUFBTSxPQUFPLGVBQWU7SUEwQjFCLElBQ0ksUUFBUTtRQUNWLE9BQU8sV0FBVyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVELElBQVksY0FBYztRQUN4QixPQUFPLElBQUksQ0FBQyxRQUFRO1lBQ2xCLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxZQUFZO1lBQ3ZDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7SUFDM0MsQ0FBQztJQUVELElBQVksU0FBUztRQUNuQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO0lBQ3BELENBQUM7SUFFRCxJQUFZLFdBQVc7UUFDckIsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLElB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WSxHQUFHLFNBQVMsQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLENBQUM7U0FDcEU7SUFDSCxDQUFDO0lBRU8sZUFBZTtRQUNyQixJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDeEQsQ0FBQzs4R0FsUVUsZUFBZTtrR0FBZixlQUFlLHd0QkNwQzVCLHl6REErREEsdzJIRDdCWSxZQUFZLHVhQUFFLG9CQUFvQjs7MkZBRWpDLGVBQWU7a0JBUjNCLFNBQVM7K0JBQ0UsUUFBUSxtQkFHRCx1QkFBdUIsQ0FBQyxNQUFNLGNBQ25DLElBQUksV0FDUCxDQUFDLFlBQVksRUFBRSxvQkFBb0IsQ0FBQztpSUFHcEMsS0FBSztzQkFBYixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUNHLGtCQUFrQjtzQkFBMUIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csYUFBYTtzQkFBckIsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLGNBQWM7c0JBQXRCLEtBQUs7Z0JBQ0csS0FBSztzQkFBYixLQUFLO2dCQUVJLFVBQVU7c0JBQW5CLE1BQU07Z0JBQ0csVUFBVTtzQkFBbkIsTUFBTTtnQkFFZ0MsWUFBWTtzQkFBbEQsU0FBUzt1QkFBQyxRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUNkLFNBQVM7c0JBQS9CLFlBQVk7dUJBQUMsT0FBTztnQkFTakIsUUFBUTtzQkFEWCxXQUFXO3VCQUFDLE9BQU8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgT3V0cHV0LFxuICBRdWVyeUxpc3QsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIFRlbXBsYXRlUmVmLFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdDaGlsZHJlbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBPcmllbnRhdGlvbixcbiAgU1VQUE9SVCxcbiAgVGh1bWJUZW1wbGF0ZUNvbnRleHQsXG4gIGlzQnJvd3Nlcixcbn0gZnJvbSAnLi4vLi4vY29yZSc7XG5pbXBvcnQgeyBBcmlhIH0gZnJvbSAnLi4vLi4vY29yZS9hcmlhJztcbmltcG9ydCB7IEdhbGxlcnlJdGVtRXZlbnQsIEdhbGxlcnlJdGVtSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9jb3JlL2dhbGxlcnktaXRlbSc7XG5pbXBvcnQgeyBDaGV2cm9uSWNvbkNvbXBvbmVudCB9IGZyb20gJy4uL2ljb25zL2NoZXZyb24vY2hldnJvbi1pY29uLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RodW1icycsXG4gIHRlbXBsYXRlVXJsOiAnLi90aHVtYnMuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi90aHVtYnMuY29tcG9uZW50LnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIENoZXZyb25JY29uQ29tcG9uZW50XSxcbn0pXG5leHBvcnQgY2xhc3MgVGh1bWJzQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKSBpdGVtczogR2FsbGVyeUl0ZW1JbnRlcm5hbFtdID0gW107XG4gIEBJbnB1dCgpIHNlbGVjdGVkSW5kZXghOiBudW1iZXI7XG4gIEBJbnB1dCgpIGFyaWE/OiBBcmlhO1xuICBASW5wdXQoKSBvcmllbnRhdGlvbj86IE9yaWVudGF0aW9uO1xuICBASW5wdXQoKSBhcnJvd3M/OiBib29sZWFuO1xuICBASW5wdXQoKSBhcnJvd1NsaWRlQnlMZW5ndGg/OiBudW1iZXI7XG4gIEBJbnB1dCgpIGF1dG9TY3JvbGw/OiBib29sZWFuO1xuICBASW5wdXQoKSB0aHVtYlRlbXBsYXRlPzogVGVtcGxhdGVSZWY8VGh1bWJUZW1wbGF0ZUNvbnRleHQ+O1xuICBASW5wdXQoKSBhcnJvd1RlbXBsYXRlPzogVGVtcGxhdGVSZWY8bmV2ZXI+O1xuICBASW5wdXQoKSBlcnJvclRlbXBsYXRlPzogVGVtcGxhdGVSZWY8bmV2ZXI+O1xuICBASW5wdXQoKSBzY3JvbGxCZWhhdmlvcj86IFNjcm9sbEJlaGF2aW9yO1xuICBASW5wdXQoKSBpc1J0bD86IGJvb2xlYW47XG5cbiAgQE91dHB1dCgpIHRodW1iQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPEdhbGxlcnlJdGVtRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSB0aHVtYkhvdmVyID0gbmV3IEV2ZW50RW1pdHRlcjxHYWxsZXJ5SXRlbUV2ZW50PigpO1xuXG4gIEBWaWV3Q2hpbGQoJ3RodW1icycsIHsgc3RhdGljOiB0cnVlIH0pIHRodW1iTGlzdFJlZiE6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+O1xuICBAVmlld0NoaWxkcmVuKCd0aHVtYicpIHRodW1ic1JlZiE6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPEhUTUxFbGVtZW50Pj47XG5cbiAgc2hvd1N0YXJ0QXJyb3cgPSBmYWxzZTtcbiAgc2hvd0VuZEFycm93ID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBhcnJvd09ic2VydmVyPzogSW50ZXJzZWN0aW9uT2JzZXJ2ZXI7XG4gIHByaXZhdGUgc2Nyb2xsSWQ/OiBudW1iZXI7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpXG4gIGdldCBjc3NDbGFzcygpIHtcbiAgICByZXR1cm4gYHRodW1icy0tJHt0aGlzLm9yaWVudGF0aW9ufWA7XG4gIH1cblxuICBwcml2YXRlIGdldCBob3N0T2Zmc2V0QXhpcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnZlcnRpY2FsXG4gICAgICA/IHRoaXMuZWxSZWYubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHRcbiAgICAgIDogdGhpcy5lbFJlZi5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgc2Nyb2xsS2V5KCk6ICdzY3JvbGxUb3AnIHwgJ3Njcm9sbExlZnQnIHtcbiAgICByZXR1cm4gdGhpcy52ZXJ0aWNhbCA/ICdzY3JvbGxUb3AnIDogJ3Njcm9sbExlZnQnO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgdGh1bWJzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLnRodW1ic1JlZiB8fCAhdGhpcy50aHVtYnNSZWYubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgdmVydGljYWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb24gPT09ICdsZWZ0JyB8fCB0aGlzLm9yaWVudGF0aW9uID09PSAncmlnaHQnO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBlbFJlZjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD5cbiAgKSB7fVxuXG4gIG5nT25DaGFuZ2VzKHsgYXJyb3dzLCBpdGVtcyB9OiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGFycm93cykge1xuICAgICAgaWYgKGFycm93cy5jdXJyZW50VmFsdWUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlQXJyb3dzKCk7XG4gICAgICB9IGVsc2UgaWYgKCFhcnJvd3MuY3VycmVudFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2hvd1N0YXJ0QXJyb3cgPSB0aGlzLnNob3dFbmRBcnJvdyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVub2JzZXJ2ZUFycm93cygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpdGVtcykge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmFycm93cykge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZUFycm93cygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2VudGVyVGh1bWJJZk5lZWRlZCh0aGlzLnNlbGVjdGVkSW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy51bm9ic2VydmVBcnJvd3MoKTtcbiAgfVxuXG4gIHNsaWRlKGRpcmVjdGlvbjogbnVtYmVyKSB7XG4gICAgbGV0IGRlbHRhOiBudW1iZXI7XG5cbiAgICBpZiAodGhpcy5hcnJvd1NsaWRlQnlMZW5ndGgpIHtcbiAgICAgIGRlbHRhID0gdGhpcy5hcnJvd1NsaWRlQnlMZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vdGU6IFNsaWRlIGJ5IHRoZSBmdWxsIGhlaWdodC93aWR0aCBvZiB0aGUgZ2FsbGVyeVxuICAgICAgLy8gb3IgYnkgdGhlIG92ZXJmbG93IG9mIHRoZSB0aHVtYnMgLSB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlcXVlc3RBbmltYXRpb25GcmFtZSBjYWxscyB3aGlsZSB0cnlpbmcgdG8gc2Nyb2xsXG4gICAgICAvLyBvdXRzaWRlIG9mIHRoZSBtaW4vbWF4IHNjcm9sbCBvZiB0aGUgdGh1bWJzXG4gICAgICBjb25zdCB0aHVtYkxpc3QgPSB0aGlzLnRodW1iTGlzdFJlZi5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgdGh1bWJMaXN0U2Nyb2xsQXhpcyA9IHRoaXMudmVydGljYWxcbiAgICAgICAgPyB0aHVtYkxpc3Quc2Nyb2xsSGVpZ2h0XG4gICAgICAgIDogdGh1bWJMaXN0LnNjcm9sbFdpZHRoO1xuICAgICAgY29uc3QgdGh1bWJMaXN0T2Zmc2V0QXhpcyA9IHRoaXMudmVydGljYWxcbiAgICAgICAgPyB0aHVtYkxpc3Qub2Zmc2V0SGVpZ2h0XG4gICAgICAgIDogdGh1bWJMaXN0Lm9mZnNldFdpZHRoO1xuXG4gICAgICBkZWx0YSA9IE1hdGgubWluKFxuICAgICAgICB0aHVtYkxpc3RPZmZzZXRBeGlzLFxuICAgICAgICB0aHVtYkxpc3RTY3JvbGxBeGlzIC0gdGh1bWJMaXN0T2Zmc2V0QXhpc1xuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5zY3JvbGwoZGVsdGEgKiBkaXJlY3Rpb24pO1xuICB9XG5cbiAgY2VudGVyVGh1bWJJZk5lZWRlZChpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLml0ZW1zIHx8IHRoaXMuaXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0SXRlbVJlZiA9IHRoaXMudGh1bWJzUmVmLnRvQXJyYXkoKVtpbmRleF07XG5cbiAgICBpZiAoIW5leHRJdGVtUmVmKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV4dEl0ZW1FbCA9IG5leHRJdGVtUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgY29uc3QgeyBvZmZzZXRMZWZ0LCBvZmZzZXRUb3AsIG9mZnNldFdpZHRoLCBvZmZzZXRIZWlnaHQgfSA9IG5leHRJdGVtRWw7XG5cbiAgICBjb25zdCBpdGVtT2Zmc2V0ID0gdGhpcy52ZXJ0aWNhbCA/IG9mZnNldFRvcCA6IG9mZnNldExlZnQ7XG4gICAgY29uc3QgaXRlbU9mZnNldEF4aXMgPSB0aGlzLnZlcnRpY2FsID8gb2Zmc2V0SGVpZ2h0IDogb2Zmc2V0V2lkdGg7XG5cbiAgICBjb25zdCBob3N0U2Nyb2xsQXhpcyA9IHRoaXMuaG9zdE9mZnNldEF4aXM7XG4gICAgY29uc3QgdGh1bWJMaXN0U2Nyb2xsID0gdGhpcy50aHVtYkxpc3RSZWYubmF0aXZlRWxlbWVudFt0aGlzLnNjcm9sbEtleV07XG5cbiAgICBjb25zdCBuZXh0U2Nyb2xsRGVsdGEgPVxuICAgICAgaXRlbU9mZnNldCArIGl0ZW1PZmZzZXRBeGlzIC8gMiAtIGhvc3RTY3JvbGxBeGlzIC8gMiAtIHRodW1iTGlzdFNjcm9sbDtcblxuICAgIGlmIChcbiAgICAgIHRodW1iTGlzdFNjcm9sbCArIGhvc3RTY3JvbGxBeGlzIDwgaXRlbU9mZnNldCArIGl0ZW1PZmZzZXRBeGlzIHx8XG4gICAgICB0aHVtYkxpc3RTY3JvbGwgPiBpdGVtT2Zmc2V0XG4gICAgKSB7XG4gICAgICB0aGlzLnNjcm9sbChuZXh0U2Nyb2xsRGVsdGEpO1xuICAgIH1cbiAgfVxuXG4gIHNlbGVjdChpbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gaW5kZXg7XG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICBpZiAodGhpcy5hdXRvU2Nyb2xsKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuY2VudGVyVGh1bWJJZk5lZWRlZChpbmRleCkpO1xuICAgIH1cbiAgfVxuXG4gIGVtaXRFdmVudChcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGl0ZW06IEdhbGxlcnlJdGVtSW50ZXJuYWwsXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIGVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxHYWxsZXJ5SXRlbUV2ZW50PlxuICApIHtcbiAgICBlbWl0dGVyLmVtaXQoe1xuICAgICAgaW5kZXgsXG4gICAgICBpdGVtLFxuICAgICAgZXZlbnQsXG4gICAgfSk7XG4gIH1cblxuICBvbkxvYWRDaGFuZ2UoaXRlbTogR2FsbGVyeUl0ZW1JbnRlcm5hbCwgc3VjY2VzczogYm9vbGVhbikge1xuICAgIGl0ZW0uX3RodW1iRmFpbGVkID0gIXN1Y2Nlc3M7XG4gIH1cblxuICBwcml2YXRlIHNjcm9sbCh0b3RhbFNjcm9sbERlbHRhOiBudW1iZXIpIHtcbiAgICBpZiAoIWlzQnJvd3Nlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoU1VQUE9SVC5zY3JvbGxCZWhhdmlvciB8fCB0aGlzLnNjcm9sbEJlaGF2aW9yID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuc2hpZnRCeURlbHRhKHRvdGFsU2Nyb2xsRGVsdGEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5zY3JvbGxJZCAhPSBudWxsKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnNjcm9sbElkKTtcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbERpc3RhbmNlID0gTWF0aC5hYnModG90YWxTY3JvbGxEZWx0YSk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBiYXNlQXJyb3dTbGlkZVRpbWUgPSAyMDA7XG4gICAgbGV0IHRvdGFsVGltZSA9IChNYXRoLmxvZzEwKHRvdGFsRGlzdGFuY2UpIC0gMS4xKSAqIGJhc2VBcnJvd1NsaWRlVGltZTtcbiAgICBpZiAodG90YWxUaW1lIDwgMCkge1xuICAgICAgdG90YWxUaW1lID0gYmFzZUFycm93U2xpZGVUaW1lO1xuICAgIH1cbiAgICBsZXQgY3VycmVudFNjcm9sbCA9IDA7XG5cbiAgICAvLyBFbXVsYXRpbmcgbmF0aXZlIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoXG4gICAgLy8gTk9URTogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gcGVyIGZyYW1lIGJhc2lzIHJlY3Vyc2l2ZWx5IHRvIGNyZWF0ZSBzbW9vdGggYW5pbWF0aW9uLlxuICAgIC8vIFRoZSBzY3JvbGwgdmFsdWUgaXMgdXBkYXRlZCBwcm9wb3J0aW9uYWxseSB0byB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBhbmltYXRpb24ncyBzdGFydC5cbiAgICAvLyBUaGUgcGVyaW9kIG9mIHJlcXVlc3RlZCBmcmFtZXMgc2hvdWxkIG1hdGNoIHRoZSBkaXNwbGF5J3MgcmVmcmVzaCByYXRlIGFzIHJlY29tbWVuZGVkIGluIFczQyBzcGVjLlxuICAgIGNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzdWdnZXN0ZWRTY3JvbGwgPSBNYXRoLmNlaWwoXG4gICAgICAgICgoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgLyB0b3RhbFRpbWUpICogdG90YWxEaXN0YW5jZVxuICAgICAgKTtcbiAgICAgIGxldCBmcmFtZVNjcm9sbCA9IE1hdGgubWluKFxuICAgICAgICBzdWdnZXN0ZWRTY3JvbGwgLSBjdXJyZW50U2Nyb2xsLFxuICAgICAgICB0b3RhbERpc3RhbmNlIC0gY3VycmVudFNjcm9sbFxuICAgICAgKTtcbiAgICAgIGZyYW1lU2Nyb2xsICo9IE1hdGguc2lnbih0b3RhbFNjcm9sbERlbHRhKTtcbiAgICAgIGN1cnJlbnRTY3JvbGwgPSBzdWdnZXN0ZWRTY3JvbGw7XG5cbiAgICAgIHRoaXMuc2hpZnRCeURlbHRhKGZyYW1lU2Nyb2xsKTtcblxuICAgICAgaWYgKGN1cnJlbnRTY3JvbGwgPD0gdG90YWxEaXN0YW5jZSkge1xuICAgICAgICB0aGlzLnNjcm9sbElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNjcm9sbElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaGlmdEJ5RGVsdGEoZGVsdGE6IG51bWJlcikge1xuICAgIHRoaXMudGh1bWJMaXN0UmVmLm5hdGl2ZUVsZW1lbnRbdGhpcy5zY3JvbGxLZXldICs9IGRlbHRhO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkFycm93c09ic2VydmVkOiBJbnRlcnNlY3Rpb25PYnNlcnZlckNhbGxiYWNrID0gZW50cmllcyA9PiB7XG4gICAgaWYgKHRoaXMudGh1bWJzRW1wdHkpIHJldHVybjtcblxuICAgIGNvbnN0IGZpcnN0VGFyZ2V0ID0gZW50cmllc1swXS50YXJnZXQ7XG4gICAgY29uc3QgeyBmaXJzdCwgbGFzdCB9ID0gdGhpcy50aHVtYnNSZWY7XG5cbiAgICBjb25zdCBmaXJzdFRodW1iRW50cnkgPVxuICAgICAgZmlyc3RUYXJnZXQgPT09IGZpcnN0Lm5hdGl2ZUVsZW1lbnQgPyBlbnRyaWVzWzBdIDogZW50cmllc1sxXTtcbiAgICBjb25zdCBsYXN0VGh1bWJFbnRyeSA9XG4gICAgICBmaXJzdFRhcmdldCA9PT0gbGFzdC5uYXRpdmVFbGVtZW50ID8gZW50cmllc1swXSA6IGVudHJpZXNbMV07XG5cbiAgICB0aGlzLnNldE9ic2VydmVkQXJyb3dzKGZpcnN0VGh1bWJFbnRyeSwgbGFzdFRodW1iRW50cnkpO1xuXG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvYnNlcnZlQXJyb3dzKCkge1xuICAgIGlmICh0aGlzLnRodW1ic0VtcHR5KSByZXR1cm47XG5cbiAgICBpZiAoIXRoaXMuYXJyb3dPYnNlcnZlcikge1xuICAgICAgdGhpcy5hcnJvd09ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHRoaXMub25BcnJvd3NPYnNlcnZlZCwge1xuICAgICAgICByb290OiB0aGlzLnRodW1iTGlzdFJlZi5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aHJlc2hvbGQ6IDEuMCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVub2JzZXJ2ZUFycm93cygpO1xuICAgIH1cbiAgICB0aGlzLmFycm93T2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRodW1ic1JlZi5maXJzdC5uYXRpdmVFbGVtZW50KTtcbiAgICB0aGlzLmFycm93T2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRodW1ic1JlZi5sYXN0Lm5hdGl2ZUVsZW1lbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRPYnNlcnZlZEFycm93cyhcbiAgICBmaXJzdFRodW1iOiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5LFxuICAgIGxhc3RUaHVtYjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeVxuICApIHtcbiAgICBjb25zdCBpbnZlcnNlID0gdGhpcy5pc1J0bCAmJiAhdGhpcy52ZXJ0aWNhbDtcblxuICAgIGlmIChpbnZlcnNlKSB7XG4gICAgICBpZiAobGFzdFRodW1iKSB0aGlzLnNob3dTdGFydEFycm93ID0gbGFzdFRodW1iLmludGVyc2VjdGlvblJhdGlvIDwgMTtcbiAgICAgIGlmIChmaXJzdFRodW1iKSB0aGlzLnNob3dFbmRBcnJvdyA9IGZpcnN0VGh1bWIuaW50ZXJzZWN0aW9uUmF0aW8gPCAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZmlyc3RUaHVtYikgdGhpcy5zaG93U3RhcnRBcnJvdyA9IGZpcnN0VGh1bWIuaW50ZXJzZWN0aW9uUmF0aW8gPCAxO1xuICAgICAgaWYgKGxhc3RUaHVtYikgdGhpcy5zaG93RW5kQXJyb3cgPSBsYXN0VGh1bWIuaW50ZXJzZWN0aW9uUmF0aW8gPCAxO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdW5vYnNlcnZlQXJyb3dzKCkge1xuICAgIHRoaXMuYXJyb3dPYnNlcnZlciAmJiB0aGlzLmFycm93T2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICB9XG59XG4iLCI8YnV0dG9uXG4gICpuZ0lmPVwic2hvd1N0YXJ0QXJyb3dcIlxuICBhcmlhLWxhYmVsPVwiUHJldmlvdXMgdGh1bWJuYWlsc1wiXG4gIGNsYXNzPVwidGh1bWJzLWFycm93IHRodW1icy1hcnJvdy1wcmV2XCJcbiAgKGNsaWNrKT1cInNsaWRlKC0xKVwiXG4+XG4gIDxkaXYgKm5nSWY9XCIhYXJyb3dUZW1wbGF0ZTsgZWxzZSAkYW55KGFycm93VGVtcGxhdGUpXCI+XG4gICAgPGNoZXZyb24taWNvbj48L2NoZXZyb24taWNvbj5cbiAgPC9kaXY+XG48L2J1dHRvbj5cblxuPHVsICN0aHVtYnMgW3N0eWxlLnNjcm9sbEJlaGF2aW9yXT1cInNjcm9sbEJlaGF2aW9yXCIgW2NsYXNzLnJ0bF09XCJpc1J0bFwiPlxuICA8bGkgKm5nSWY9XCIhaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aFwiIGNsYXNzPVwidGh1bWJzLWluaXRpYWwtaXRlbVwiPjwvbGk+XG4gIDxsaVxuICAgICN0aHVtYlxuICAgICpuZ0Zvcj1cImxldCBpdGVtIG9mIGl0ZW1zOyBsZXQgaSA9IGluZGV4XCJcbiAgICBbY2xhc3MudGh1bWJzLWl0ZW0tLXNlbGVjdGVkXT1cImkgPT09IHNlbGVjdGVkSW5kZXhcIlxuICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgKGNsaWNrKT1cImVtaXRFdmVudChpLCBpdGVtLCAkZXZlbnQsIHRodW1iQ2xpY2spXCJcbiAgICAobW91c2VlbnRlcik9XCJlbWl0RXZlbnQoaSwgaXRlbSwgJGV2ZW50LCB0aHVtYkhvdmVyKVwiXG4gID5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIXRodW1iVGVtcGxhdGU7IGVsc2UgY3VzdG9tVGh1bWJUZW1wbGF0ZVwiPlxuICAgICAgPGltZ1xuICAgICAgICBbc3JjXT1cIml0ZW0udGh1bWJTcmMgfHwgJydcIlxuICAgICAgICBbYWx0XT1cIml0ZW0uYWx0XCJcbiAgICAgICAgKGxvYWQpPVwib25Mb2FkQ2hhbmdlKGl0ZW0sIHRydWUpXCJcbiAgICAgICAgKGVycm9yKT1cIm9uTG9hZENoYW5nZShpdGVtLCBmYWxzZSlcIlxuICAgICAgLz5cblxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIml0ZW0uX3RodW1iRmFpbGVkXCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAqbmdJZj1cIiFlcnJvclRlbXBsYXRlOyBlbHNlICRhbnkoZXJyb3JUZW1wbGF0ZSlcIlxuICAgICAgICAgIGNsYXNzPVwidGh1bWJzLWVycm9yXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwidGh1bWJzLWVycm9yLWljb25cIlxuICAgICAgICAgICAgW2NsYXNzLnRodW1icy1lcnJvci1pY29uLS12aWRlb109XCJpdGVtLnZpZGVvXCJcbiAgICAgICAgICA+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9uZy1jb250YWluZXI+XG5cbiAgICA8bmctdGVtcGxhdGUgI2N1c3RvbVRodW1iVGVtcGxhdGU+XG4gICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgJGFueSh0aHVtYlRlbXBsYXRlKTtcbiAgICAgICAgICBjb250ZXh0OiB7IGluZGV4OiBpLCBzZWxlY3RlZEluZGV4OiBzZWxlY3RlZEluZGV4LCBpdGVtOiBpdGVtIH1cbiAgICAgICAgXCJcbiAgICAgID48L25nLWNvbnRhaW5lcj5cbiAgICA8L25nLXRlbXBsYXRlPlxuICA8L2xpPlxuPC91bD5cblxuPGJ1dHRvblxuICAqbmdJZj1cInNob3dFbmRBcnJvd1wiXG4gIGFyaWEtbGFiZWw9XCJOZXh0IHRodW1ibmFpbHNcIlxuICBjbGFzcz1cInRodW1icy1hcnJvdyB0aHVtYnMtYXJyb3ctbmV4dFwiXG4gIChjbGljayk9XCJzbGlkZSgxKVwiXG4+XG4gIDxkaXYgKm5nSWY9XCIhYXJyb3dUZW1wbGF0ZTsgZWxzZSAkYW55KGFycm93VGVtcGxhdGUpXCI+XG4gICAgPGNoZXZyb24taWNvbj48L2NoZXZyb24taWNvbj5cbiAgPC9kaXY+XG48L2J1dHRvbj5cbiJdfQ==